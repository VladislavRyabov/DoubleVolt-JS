const pets = [
    {
        name: "Volvo", // Порода
        description: '2018 VOLVO S90 T6 INSCRIPTION',
        location: "45,201 mi (ACTUAL)",
        price: "26700$",
        url: 'img/VOLVO-S90.jpeg'
    },
    {
        name: "Audi", // Порода
        description: '2019 AUDI A6 PREMIUM',
        location: "145,335 mi (ACTUAL)",
        price: "29000$",
        url: 'img/2019-AUDI-A6-PREMIUM.jpeg'
    },
    {
        name: "Mercedes-Benz", // Порода
        description: '2017 MERCEDES-BENZ E 300',
        location: "113,535 mi (ACTUAL)",
        price: "39000$",
        url: 'img/2017-MERCEDES-BENZ-E-300.jpeg'
    },
    {
        name: "BMW", // Порода
        description: '2020 Touring 318 d Advantage',
        location: "103.057 KM",
        price: "21000$",
        url: 'img/bmw.jpeg'
    },
    {
        name: "VOLKSWAGEN", // Порода
        description: '2017 VOLKSWAGEN PASSAT R-LINE',
        location: "-- mi (ACTUAL)",
        price: "15200$",
        url: 'img/VOLKSWAGEN-PASSAT-R-LINE.jpeg'
    },
    {
        name: "BMW", // Порода
        description: '2016 BMW 550 XI',
        location: "45,525 mi (ACTUAL)",
        price: "19800$",
        url: 'img/BMW-550-XI.jpeg'
    },
    {
        name: "Audi", // Порода
        description: '2016 AUDI A6 PRESTIGE',
        location: "0 mi (NOT ACTUAL)",
        price: "17500$",
        url: 'img/AUDI-A6-PRESTIGE.jpeg'
    },
    {
        name: "Mercedes-Benz", // Порода
        description: '2016 CLA -Klasse Shooting Brake CLA 220 CDI / d',
        location: "101.104 KM",
        price: "12000$",
        url: 'img/Mercedes-Benz-CLA.jpeg'
    },
    {
        name: "Audi", // Порода
        description: '2019 AUDI Q7 PREMIUM PLUS',
        location: "36,273 mi (ACTUAL)",
        price: "25500$",
        url: 'img/AUDI-Q7.jpeg'
    },
    {
        name: "BMW", // Порода
        description: '2015 BMW 528 I',
        location: "90,253 mi (ACTUAL)",
        price: "15400$",
        url: 'img/BMW-528-I.jpeg'
    },
    {
        name: "Volvo", // Порода
        description: '2016 VOLVO XC90 T6',
        location: "145,201 mi (ACTUAL)",
        price: "29500$",
        url: 'img/VOLVO-XC90-T6.jpeg'
    },
    {
        name: "Mercedes-Benz", // Порода
        description: '2014 CLS CLS 350 BlueTEC / d',
        location: "57.719 KM",
        price: "16000$",
        url: 'img/Mercedes-Benz-CLS.jpeg'
    },
    {
        name: "Volvo", // Порода
        description: '2018 VOLVO S90 T6 INSCRIPTION',
        location: "45,201 mi (ACTUAL)",
        price: "26700$",
        url: 'img/VOLVO-S90.jpeg'
    },
    {
        name: "Audi", // Порода
        description: '2019 AUDI A6 PREMIUM',
        location: "145,335 mi (ACTUAL)",
        price: "29000$",
        url: 'img/2019-AUDI-A6-PREMIUM.jpeg'
    },
    {
        name: "Mercedes-Benz", // Порода
        description: '2017 MERCEDES-BENZ E 300',
        location: "113,535 mi (ACTUAL)",
        price: "39000$",
        url: 'img/2017-MERCEDES-BENZ-E-300.jpeg'
    },
    {
        name: "BMW", // Порода
        description: '2020 Touring 318 d Advantage',
        location: "103.057 KM",
        price: "21000$",
        url: 'img/bmw.jpeg'
    },
    {
        name: "VOLKSWAGEN", // Порода
        description: '2017 VOLKSWAGEN PASSAT R-LINE',
        location: "-- mi (ACTUAL)",
        price: "15200$",
        url: 'img/VOLKSWAGEN-PASSAT-R-LINE.jpeg'
    },
    {
        name: "BMW", // Порода
        description: '2016 BMW 550 XI',
        location: "45,525 mi (ACTUAL)",
        price: "19800$",
        url: 'img/BMW-550-XI.jpeg'
    },
    {
        name: "Audi", // Порода
        description: '2016 AUDI A6 PRESTIGE',
        location: "0 mi (NOT ACTUAL)",
        price: "17500$",
        url: 'img/AUDI-A6-PRESTIGE.jpeg'
    },
    {
        name: "Mercedes-Benz", // Порода
        description: '2016 CLA -Klasse Shooting Brake CLA 220 CDI / d',
        location: "101.104 KM",
        price: "12000$",
        url: 'img/Mercedes-Benz-CLA.jpeg'
    },
    {
        name: "Audi", // Порода
        description: '2019 AUDI Q7 PREMIUM PLUS',
        location: "36,273 mi (ACTUAL)",
        price: "25500$",
        url: 'img/AUDI-Q7.jpeg'
    },
    {
        name: "BMW", // Порода
        description: '2015 BMW 528 I',
        location: "90,253 mi (ACTUAL)",
        price: "15400$",
        url: 'img/BMW-528-I.jpeg'
    },
    {
        name: "Volvo", // Порода
        description: '2016 VOLVO XC90 T6',
        location: "145,201 mi (ACTUAL)",
        price: "29500$",
        url: 'img/VOLVO-XC90-T6.jpeg'
    },
    {
        name: "Mercedes-Benz", // Порода
        description: '2014 CLS CLS 350 BlueTEC / d',
        location: "57.719 KM",
        price: "16000$",
        url: 'img/Mercedes-Benz-CLS.jpeg'
    },
    {
        name: "Volvo", // Порода
        description: '2018 VOLVO S90 T6 INSCRIPTION',
        location: "45,201 mi (ACTUAL)",
        price: "26700$",
        url: 'img/VOLVO-S90.jpeg'
    },
    {
        name: "Audi", // Порода
        description: '2019 AUDI A6 PREMIUM',
        location: "145,335 mi (ACTUAL)",
        price: "29000$",
        url: 'img/2019-AUDI-A6-PREMIUM.jpeg'
    },
    {
        name: "Mercedes-Benz", // Порода
        description: '2017 MERCEDES-BENZ E 300',
        location: "113,535 mi (ACTUAL)",
        price: "39000$",
        url: 'img/2017-MERCEDES-BENZ-E-300.jpeg'
    },
    {
        name: "BMW", // Порода
        description: '2020 Touring 318 d Advantage',
        location: "103.057 KM",
        price: "21000$",
        url: 'img/bmw.jpeg'
    },
    {
        name: "VOLKSWAGEN", // Порода
        description: '2017 VOLKSWAGEN PASSAT R-LINE',
        location: "-- mi (ACTUAL)",
        price: "15200$",
        url: 'img/VOLKSWAGEN-PASSAT-R-LINE.jpeg'
    },
    {
        name: "BMW", // Порода
        description: '2016 BMW 550 XI',
        location: "45,525 mi (ACTUAL)",
        price: "19800$",
        url: 'img/BMW-550-XI.jpeg'
    },
    {
        name: "Audi", // Порода
        description: '2016 AUDI A6 PRESTIGE',
        location: "0 mi (NOT ACTUAL)",
        price: "17500$",
        url: 'img/AUDI-A6-PRESTIGE.jpeg'
    },
    {
        name: "Mercedes-Benz", // Порода
        description: '2016 CLA -Klasse Shooting Brake CLA 220 CDI / d',
        location: "101.104 KM",
        price: "12000$",
        url: 'img/Mercedes-Benz-CLA.jpeg'
    },
    {
        name: "Audi", // Порода
        description: '2019 AUDI Q7 PREMIUM PLUS',
        location: "36,273 mi (ACTUAL)",
        price: "25500$",
        url: 'img/AUDI-Q7.jpeg'
    },
    {
        name: "BMW", // Порода
        description: '2015 BMW 528 I',
        location: "90,253 mi (ACTUAL)",
        price: "15400$",
        url: 'img/BMW-528-I.jpeg'
    },
    {
        name: "Volvo", // Порода
        description: '2016 VOLVO XC90 T6',
        location: "145,201 mi (ACTUAL)",
        price: "29500$",
        url: 'img/VOLVO-XC90-T6.jpeg'
    },
    {
        name: "Mercedes-Benz", // Порода
        description: '2014 CLS CLS 350 BlueTEC / d',
        location: "57.719 KM",
        price: "16000$",
        url: 'img/Mercedes-Benz-CLS.jpeg'
    },
    
]

// PAGINATION

const postsData = pets
let currentPage = 1;
let rows = 6;
const postsEl = document.querySelector('.pets__container');


function displayList(arrData, rowPerPage, page) {
    // const postsEl = document.querySelector('.pets__container');
    postsEl.innerHTML = '';
    page--;

    const start = rowPerPage * page;
    const end = start + rowPerPage;
    const PaginatedData = arrData.slice(start, end)

    PaginatedData.forEach((item) => {
        let newPet = createCart(item, true); 
        postsEl.append(newPet) 
    })
}

function displayPagination(arrData, rowPerPage) {
    const PaginationEl = document.querySelector('.pagination');
    const pagesCount = Math.ceil(arrData.length / rowPerPage);
    const ulEl = document.createElement('div');
    ulEl.classList.add('pagination__list');
    
    for(let i = 0; i < pagesCount; i ++) {
        const liEl = displayPaginationBtn(i + 1)
        ulEl.appendChild(liEl)
    }
    PaginationEl.appendChild(ulEl)
}

function displayPaginationBtn(page) {
    const liEl = document.createElement('a');
    liEl.classList.add('pagination__item');
    liEl.setAttribute("href", "#cardAvto");
    liEl.innerText = page

    if(currentPage == page) liEl.classList.add('pagination__item--active');

    liEl.addEventListener('click', () => {
        currentPage = page
        displayList(postsData, rows, currentPage)

        let currentItemLi = document.querySelector('a.pagination__item--active');
        currentItemLi.classList.remove('pagination__item--active');
        liEl.classList.add('pagination__item--active')
    })

    return liEl;
}

displayList(postsData, rows, currentPage)
displayPagination(postsData, rows)




// const out = document.querySelector('.pets__container');
const select = document.querySelector('select');
const inputSerch = document.querySelector('.inputSerch');
const lowPrice = document.querySelector('.low-price')
const highPrice = document.querySelector('.high-price')
let out2 = document.querySelector('.out2');
let outItem = document.querySelector('.out2-item');

let fav = JSON.parse(localStorage.getItem('fav')) ? JSON.parse(localStorage.getItem('fav')) : [];
out2.innerHTML = fav.length

let newPets = [...pets];

// рендорим Select
createSelect(pets) //** Функция которая пропускает через себя любой масив в данном
//  случае pets

                  // Выводим все обекты массива подставляя их значения в item
function createCart(item, btnShow) {
    // создаем HTML элементы через JS
    let petsItem = document.createElement('div');

    let petsImg = document.createElement('img');
    let petsName = document.createElement('h3');
    let petsPrice = document.createElement('h4');
    let petsDescription = document.createElement('p');
    let petsLoc = document.createElement('h5');

    // Добавляем HTML элементам классы через JS
    petsItem.classList.add('pets__item');

    petsImg.classList.add('pets__img');
    petsName.classList.add('pets__name');
    petsPrice.classList.add('pets__price');
    petsDescription.classList.add('pets__description');
    petsLoc.classList.add('pets__loc');

    //Выводим в HTML item 
    petsName.innerText = item.name;
    petsImg.setAttribute('src', item.url)
    petsPrice.innerText = item.price;
    petsDescription.innerText = item.description;
    petsLoc.innerText = item.location;

    if (btnShow) {
        let testBtn = document.createElement('button');
        testBtn.addEventListener('click', () => {
            fav.push(item)
            localStorage.setItem('fav', JSON.stringify(fav))
            out2.innerHTML = fav.length
        },{'once': true})
        testBtn.innerHTML = `Купить`;
        testBtn.classList.add('CarBtnBlack');
        petsItem.appendChild(testBtn)
    }

    // помещаем в div другие эдементы html
    petsItem.append(petsImg, petsName, petsPrice, petsDescription, petsLoc)
    return petsItem;
} 


function send2() {
    try {
        document.querySelector('#TEst').onclick = () => {
            document.querySelector('.home-offer__modal-container').classList.add('is-visible')
        }
        
        document.querySelector('.home-offer__modal-close').onclick = () => {
            document.querySelector('.home-offer__modal-container').classList.remove('is-visible')
        }
    } 
    
    catch {console.log("dont find")}
}

function send1() {
    outItem.innerHTML = '';
    fav.forEach((item) => {
        outItem.append(createCart(item, false))      
    })
}

                  // select

function createSelect(item) { // item это любой массив (в данном случае pets)
    const ress = []; // новый техничьный масив (ress)

    item.map((item) => {  // метод map берет все item.name и push в ress
        ress.push(item.name)
    })

    let newRess = new Set(ress) // new Set(ress) уберает совподения 
    // оставляет только уникальные item.name

    newRess.forEach((item) => { // перебор newRess
        select.innerHTML += `<option value"${item}">${item}</option>`// добавление 
    })  // в select option value"${item}">${item}
}

select.addEventListener('change', () => { // событие по change и function

    newPets = []; // Очищаем newPets

    postsEl.innerHTML = ''; // Очищаем postsEl
    pets.forEach((item) => { // перебор pets
        if (item.name == select.value) { 
            newPets.push(item)
            let newPet = createCart(item, true); // newPet == createCart(item) function - которая Выводит все обекты массива подставляя их значения в item
            postsEl.append(newPet) // выводим newPet
        } else if (select.value == 'Все') { // показывает всех
            newPets.push(item) 
            let newPet = createCart(item, true); 
            postsEl.append(newPet) 
        }
    })
})

                   // Serch

function serchName(arr, val) { // function (принимает (arr, val))
    let newArr = [];  // новый техничьный массив
    arr.map((item) => {  // перебераем массив pets
        let lowItemName = item.name.toLowerCase(); // переводим все item.name мссива pets в toLowerCase
        let lowItemValue = val.toLowerCase();  // переводим все value в toLowerCase
   //                                                                                Ско
        if(lowItemName.indexOf(lowItemValue) >= 0) {  // поис совпадения по indexOf (val == arr) по нескольким буквам 
            newArr.push(item) // добавляем все совпавшие item d в newArr                   Скоттиш фолд     
        }
    })
    return newArr // возвращаем newArr
}

inputSerch.addEventListener('keyup', () => {   // +  Ввод с клавиатуры

    newPets = []; // Очищаем newPets

    postsEl.innerHTML = ''; // Очищаем postsEl
    let pet = serchName(pets, inputSerch.value);   // let pet = function serchName(arr, val)
    pet.forEach((item) => { // Перебираем массив pet

        newPets.push(item) // Записуем в newPets совпавшие item.name

        let newPet = createCart(item, true); //let newPet = ( createCart(item) - // Выводим все объекты массива подставляя их значения в item
        postsEl.append(newPet) // Выводим все объекты массива pet подставляя их значения в item
    })
})

                  // sortCat

function sortCat(revers) {
    postsEl.innerHTML = ''; // Очищаем postsEl
  
    let sortPet = newPets.sort((item, index) => { // перебераем масив 

        if(item.price > index.price) { // Сортируем
            return 1
        } else {
            return -1
        }
    })

    if(revers) sortPet.reverse();

    sortPet.forEach((item) => { // Перебираем массив sortPet
        let newPet = createCart(item, true); //let newPet = ( createCart(item) - // Выводим все объекты массива подставляя их значения в item
        postsEl.append(newPet) // Выводим все объекты массива sortPet подставляя их значения в item
    })
}

lowPrice.addEventListener('click', () => sortCat(false))
highPrice.addEventListener('click', () => sortCat(true))


// Найти все ссылки начинающиеся на #
const anchors = document.querySelectorAll('a[href^="#"]')

// Цикл по всем ссылкам
for(let anchor of anchors) {
  anchor.addEventListener("click", function(e) {
    e.preventDefault() // Предотвратить стандартное поведение ссылок
    // Атрибут href у ссылки, если его нет то перейти к body (наверх не плавно)
    const goto = anchor.hasAttribute('href') ? anchor.getAttribute('href') : 'body'
    // Плавная прокрутка до элемента с id = href у ссылки
    document.querySelector(goto).scrollIntoView({
      behavior: "smooth",
      block: "start"
    })
  })
}
